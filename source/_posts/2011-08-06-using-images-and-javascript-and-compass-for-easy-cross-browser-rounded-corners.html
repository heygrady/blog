---
layout: post
title: "Using Images and JavaScript and Compass for Easy Cross-Browser Rounded Corners"
date: 2011-08-06 13:14
comments: true
categories: js sass compass polyfill plugin
---
<p>In a previous <a href="{% post_url 2011-02-24-cross-browser-rounded-corners-overview %}">post exploring rounded corner methods</a>, I covered a technique using absolute positioning for faking rounded corners in browsers greater than IE6. One issue with faking rounded corners is the amount of HTML markup required as well as the hassle of crafting the accompanying CSS. I have created a jQuery plug-in for adding the required markup and a complementary Sass/Compass @mixin for generating the required CSS. The markup generated utilizes jQuery UI theming for the CSS class names.</p>
<!--more-->
<h2>Summary of the Technique</h2>
<p>As covered before, the idea is to use extra markup and CSS to create rounded corners even without support for <code>border-radius</code>. Of course the technique is also useful for creating fancy corners that <code>border-radius</code> wouldn't support. The two examples below show a normal <code>div</code> using <code>border-radius</code> and a box that is using the absolutely positioned <code>span</code> technique from the previous article.</p>
<figure>
	<img id="fig-border-radius-image" src="http://assets.heygrady.com/corners/border-radius-box.png" alt="simple box with a red border" />
	<iframe id="fig-border-radius-iframe" width="202" height="202" scrolling="no" frameborder="0" src="http://assets.heygrady.com/corners/border-radius-box.html"></iframe>
	<script>
		if (Modernizr.borderradius) {
			document.getElementById("fig-border-radius-image").style.display = "none";
		} else {
			document.getElementById("fig-border-radius-iframe").style.display = "none";
		}
	</script>
	<figcaption>Border Radius<br>(<a href="http://assets.heygrady.com/corners/border-radius-box.html" target="_blank">view live example</a>)</figcaption>
</figure>
<figure>
	<iframe width="202" height="202" scrolling="no" frameborder="0" src="http://assets.heygrady.com/corners/position-box-sprite.html"></iframe>
	<figcaption>Absolute Position using a Sprite<br>(<a href="http://assets.heygrady.com/corners/position-box-sprite.html" target="_blank">view live example</a>)</figcaption>
</figure>
<h3>Basic Markup</h3>
<p>The absolute positioning technique requires some additional markup to be added to the page for the corners and sides of the box. Below the initial box is show with no additional markup.</p>
{% gist 1161561 box.html %}
<p>In order to create the illusion of corners, some additional markup must be added to the page. First the content is wrapped in a <code>.ui-corners-content</code> that is used with <code>z-index</code> to <a href="http://jsfiddle.net/heygrady/3YbNk/">ensure that the corners never cover up the content</a> of our <code>.box</code> &mdash; <a href="http://www.w3.org/TR/css3-background/#corner-clipping"
><code>border-radius</code> doesn't clip content</a> unless <code>overflow: hidden;</code> is set. Next, eight <code>span</code>s are added; one for each corner and side. Below is the markup used for creating the rounded corner illusion.</p>
{% gist 1161561 corners.html %}
<p>As you can see above, the extra markup is very straightforward but it's not exactly ideal to have to add this to every box on a website &mdash; this is the point of the jQuery plug-in that will be discussed further down.</p>
<h3>Basic CSS</h3>
<p>In order to optimize performance and simplify the JavaScript plug-in, all of the styling is done using CSS. The base CSS will set the <code>z-index</code> of the <code>.ui-corners-content</code> and position each of the corners and sides. As mentioned in the previous article, conflicting positioning properties are used to ensure that the sides stretch the fill width of the <code>.box</code>. For instance the left side, <code>.ui-corners-side-left</code>, is given a <code>top</code> and a <code>bottom</code> of 10px. Setting the <code>top</code> and <code>bottom</code> at the same time has the effect of stretching the <code>span</code> the entire height because both properties are honored. The 10px spacing is to prevent the sides from overlapping the corners. As mentioned in the previous article, IE6 will ignore the conflicting properties which makes this a poor solution for sites that require IE6 support.</p>
<p>The CSS below will correctly position all of the <code>span</code>s and set some default heights and widths. In order to actually see something, the base CSS needs to be extended by adding background images and altering the default heights and widths &mdash; this is the point of the Compass <code>@mixin</code> that will be discussed further down.</p>
{% gist 1161561 base.css %}
<p>Although absolutely positioned background images can look like a native <code>border-radius</code>, they don't actually affect the sizing of the box like a real border does. It's easy to fake the presence of a border by adding <code>padding</code> to the <code>.box</code> equal to the width of the border. While it's possible to simply set a transparent border &mdash; <code>border: 10px solid transparent;</code> &mdash; setting a border will require additional calculations for the corner and side <code>span</code>s because <a href="http://jsfiddle.net/heygrady/HVNEJ/">border appears outside the box</a>.</p>
<h2>Using the jQuery Corners Plug-in</h2>
<figure>
	<iframe width="202" height="202" scrolling="no" frameborder="0" src="http://assets.heygrady.com/corners-2/simple.html"></iframe>
	<figcaption>jQuery Corners Basic Usage<br>(<a href="http://assets.heygrady.com/corners-2/simple.html" target="_blank">view live example</a>)</figcaption>
</figure>
<h2>Using the UI Corners <code>@mixin</code></h2>